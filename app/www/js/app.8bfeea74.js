(function(){"use strict";var t={7868:function(t,e,a){a.d(e,{E:function(){return Wt}});var o=a(3396),n=a(4870),i=a(2483),l={__name:"App",setup(t){return(t,e)=>((0,o.wg)(),(0,o.j4)((0,n.SU)(i.MA)))}};const s=l;var d=s,r=a(9242),c=a(4760),u=a(7139),f=a(6983),p=a.n(f);const h={class:"title-bar"};function v(t,e){return(0,o.wg)(),(0,o.iD)("div",h,[(0,o.WI)(t.$slots,"default")])}var g=a(89);const m={},y=(0,g.Z)(m,[["render",v]]);var b=y;const _={class:"main-container"};function w(t,e){return(0,o.wg)(),(0,o.iD)("div",_,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])}const S={},F=(0,g.Z)(S,[["render",w],["__scopeId","data-v-b61b4da0"]]);var k=F;const I=t=>((0,o.dD)("data-v-fd9daa2e"),t=t(),(0,o.Cn)(),t),M=["src"],D=I((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),T={key:0,class:"display-quantity"};function C(t,e,a,n,i,l){return(0,o.wg)(),(0,o.iD)("div",{class:(0,u.C_)(["food-item",{selected:a.selected}]),onClick:e[2]||(e[2]=(0,r.iM)((t=>l.bodyClick()),["self"])),draggable:"true"},[(0,o._)("div",{class:(0,u.C_)(["food-icon",{crossed:a.crossed}])},[(0,o._)("img",{src:l.resolveImg(a.icon)},null,8,M)],2),(0,o._)("div",{class:(0,u.C_)(["food-name",{crossed:a.crossed}]),onClick:e[0]||(e[0]=t=>l.bodyClick())},[(0,o._)("span",null,(0,u.zw)(l.displayName),1)],2),D,void 0!==a.selectedQuantity?((0,o.wg)(),(0,o.iD)("div",T,[(0,o._)("span",null,(0,u.zw)(l.displayQuantity),1)])):(0,o.kq)("",!0),a.amount?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"food-amount",onClick:e[1]||(e[1]=t=>l.amountClick())},[(0,o._)("span",null,(0,u.zw)(a.amount),1)])):(0,o.kq)("",!0)],2)}var U={data(){return{holdStartTimestamp:0}},props:{name:{type:String,default:"Food name"},icon:{type:String,default:"egg"},description:{type:String,default:""},protein:{type:Number,default:0},fat:{type:Number,default:0},carbs:{type:Number,default:0},amount:{type:Number,default:void 0},selected:{type:Boolean,default:!1},crossed:{type:Boolean,default:!1},editing:{type:Boolean,default:!1},selectedQuantity:{type:Number,default:void 0}},computed:{calories(){return 9*this.fat+4*this.protein+4*this.carbs},displayName(){return this.name.charAt(0).toUpperCase()+this.name.slice(1)},displayQuantity(){let t,e;switch(this.selectedQuantity){case 0:t=this.calories,e="kcal";break;case 1:t=this.protein,e="g";break;case 2:t=this.fat,e="g";break;case 3:t=this.carbs,e="g";break}if(void 0!==t)return`${t.toFixed(0)} ${e}`}},methods:{resolveImg(t){return`/food/${t}.svg`},heldLongEnough(){const t=(new Date).getTime(),e=500;return t-this.holdStartTimestamp>e},holdStart(){this.holdStartTimestamp=(new Date).getTime()},holdEnd(){this.heldLongEnough()&&this.$emit("hold")},bodyClick(){this.$emit("bodyClick")},amountClick(){this.$emit("amountClick")}}};const x=(0,g.Z)(U,[["render",C],["__scopeId","data-v-fd9daa2e"]]);var W=x;const N={class:"main-container"};function E(t,e,a,n,i,l){return(0,o.wg)(),(0,o.iD)("div",N,[(0,o._)("div",null,(0,u.zw)(a.text),1),(0,o._)("div",null,[(0,o._)("span",{style:(0,u.j5)({color:l.displayColor})},(0,u.zw)(l.displayValue),5),(0,o.Uk)(" / "+(0,u.zw)(l.displayTarget),1)])])}var O={props:{text:{type:String,default:""},value:{type:Number,default:0},target:{type:Number,default:0}},computed:{valuePercentage(){return 0==this.target?0:100*this.value/this.target},displayColor(){return this.valuePercentage<85||this.valuePercentage>110?Wt("--color-danger"):Wt("--color-text")},displayValue(){return this.value.toFixed()},displayTarget(){return this.target.toFixed()}}};const j=(0,g.Z)(O,[["render",E],["__scopeId","data-v-26bf3a5e"]]);var P=j;const A={class:"container"},Z={props:{protein:{type:Number,default:0},fat:{type:Number,default:0},carbs:{type:Number,default:0},proteinTarget:{type:Number,default:0},fatTarget:{type:Number,default:0},carbsTarget:{type:Number,default:0},selected:{type:String,default:void 0}},computed:{calories(){return 9*this.fat+4*this.protein+4*this.carbs},caloriesTarget(){return 9*this.proteinTarget+4*this.fatTarget+4*this.carbsTarget}}};var Q=Object.assign(Z,{__name:"TotalsBars",setup(t){return(e,a)=>((0,o.wg)(),(0,o.iD)("div",A,[(0,o._)("div",null,[(0,o.Wm)(P,{text:"Protein",value:t.protein,target:t.proteinTarget},null,8,["value","target"])]),(0,o._)("div",null,[(0,o.Wm)(P,{text:"Fat",value:t.fat,target:t.fatTarget},null,8,["value","target"])]),(0,o._)("div",null,[(0,o.Wm)(P,{text:"Carbs",value:t.carbs,target:t.carbsTarget},null,8,["value","target"])]),(0,o._)("div",null,[(0,o.Wm)(P,{text:"Kcal",value:e.calories,target:e.caloriesTarget},null,8,["value","target"])])]))}});const q=(0,g.Z)(Q,[["__scopeId","data-v-4b393198"]]);var V=q,z=(a(560),a(1020)),B=a(7327);function L(t,e){if(e<=0||e>t.length)return console.error("Invalid sample size"),[];const a=[...t];for(let n=a.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[a[n],a[t]]=[a[t],a[n]]}const o=a.slice(0,e);return o}class ${constructor(){(0,B.Z)(this,"allFoods",void 0),(0,B.Z)(this,"protein",void 0),(0,B.Z)(this,"fat",void 0),(0,B.Z)(this,"carbs",void 0),(0,B.Z)(this,"calculationMethod",void 0),(0,B.Z)(this,"calculationError",void 0)}calculateDay(){const t=["breakfast","snack","lunch","dinner"],e=[];return t.forEach((()=>{const t=L(this.allFoods,3);for(const e of t)e.amount=1;e.push([...t])})),e}calculateDays(t){console.log(t)}}const Y=["breakfast","snack","lunch","dinner"],H={all:"ALL",protein:"PROTEIN",fat:"FAT",carbs:"CARBS"},J={protein:110,fat:105,carbs:100,days:1,calculationMethod:H.all},K=(0,z.Q_)("mainStore",{state:()=>({allFoods:[],planFoods:[],planInfo:null,day:0,editMode:!0,selectedQuantity:0,addFoodModalVisible:!1,addFoodModalMeal:0,addFoodModalFoods:[]}),getters:{todaysFoods(){return this.planFoods[this.day]},todayIsFirstDay(){return 0===this.day},todayIsLastDay(){return this.day===this.planInfo.days-1},todaysQuantities(){const t={protein:0,fat:0,carbs:0};for(const e of this.todaysFoods)for(const a of e)t.protein+=a.protein*(a.amount||0),t.fat+=a.fat*(a.amount||0),t.carbs+=a.carbs*(a.amount||0);return t},allPlanQuantities(){const t={protein:0,fat:0,carbs:0};for(let e=0;e<this.planFoods.length;e++)for(const a of this.planFoods[e])for(const e of a)t.protein+=e.protein*(e.amount||0),t.fat+=e.fat*(e.amount||0),t.carbs+=e.carbs*(e.amount||0);return t},calculator(){const t=new $;return t.allFoods=this.allFoods,t.protein=this.planInfo.protein,t.fat=this.planInfo.fat,t.carbs=this.planInfo.carbs,t.calculationMethod=this.planInfo.calculationMethod,t.calculationError=this.planInfo.calculationError,t}},actions:{save(){localStorage.setItem("planFoods",JSON.stringify(this.planFoods)),null!==this.planInfo&&localStorage.setItem("planInfo",JSON.stringify(this.planInfo))},load(){const t=localStorage.getItem("planInfo");this.planInfo=t?JSON.parse(t):{...J,created:(new Date).getTime()};const e=localStorage.getItem("planFoods");if(e&&(this.planFoods=JSON.parse(e),e.length===this.planInfo.days&&(this.planFoods=void 0)),!e){this.planFoods=[];for(let t=0;t<this.planInfo.days;t++)this.planFoods.push([]),this.planFoods.push([]),this.planFoods.push([]),this.planFoods.push([])}},async fetchData(){const t=await fetch("/data.json");this.allFoods=await t.json(),this.allFoods.forEach((t=>{t.selected=!1}))},goToPreviousDay(){this.todayIsFirstDay||this.day--},goToNextDay(){this.todayIsLastDay||this.day++},toggleEditMode(){this.editMode=!this.editMode},recalculateToday(){const t=this.calculator.calculateDay();this.planFoods[this.day]=t,this.save()},changeFoodEaten(t){t.selected=!t.selected,this.save()},changeFoodAmount(t){const e={.25:.5,.5:.75,.75:1,1:1.25,1.25:1.5,1.5:.25};t.amount=e[t.amount]||1},foodDragStart(){},foodDragEnd(){this.save()},showAddFoodModal(t){this.addFoodModalMeal=t,this.addFoodModalVisible=!0,this.addFoodModalFoods=this.allFoods.map((t=>({...t})))},closeAddFoodModal(){const t=this.addFoodModalMeal,e=this.addFoodModalFoods.filter((t=>t.selected));e.forEach((t=>{t.selected=!1,t.amount=1})),this.planFoods[this.day][t].push(...e),this.addFoodModalVisible=!1}}}),R=t=>((0,o.dD)("data-v-25a0641e"),t=t(),(0,o.Cn)(),t),G=R((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),X=R((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1)));var tt={__name:"AddFoodModal",setup(t){const e=K();return(t,a)=>{const i=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)("div",{class:(0,u.C_)(["modal",{"modal-hidden":!(0,n.SU)(e).addFoodModalVisible}])},[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o._)("div",{class:"title-bar-icon",onClick:a[0]||(a[0]=t=>(0,n.SU)(e).addFoodModalVisible=!1)},[(0,o.Wm)(i,{icon:["fas","xmark"]})]),G,(0,o._)("div",null,"Add "+(0,u.zw)((0,n.SU)(Y)[(0,n.SU)(e).addFoodModalMeal]),1),X,(0,o._)("div",{class:"title-bar-icon",onClick:a[1]||(a[1]=t=>(0,n.SU)(e).closeAddFoodModal())},[(0,o.Wm)(i,{icon:"fa-solid fa-check"})])])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(e).addFoodModalFoods,((t,e)=>((0,o.wg)(),(0,o.j4)(W,{key:e,name:t.name,icon:t.icon,description:t.description,protein:t.protein,fat:t.fat,carbs:t.carbs,amount:void 0,selected:t.selected,onBodyClick:e=>t.selected=!t.selected},null,8,["name","icon","description","protein","fat","carbs","selected","onBodyClick"])))),128))])),_:1})],2)}}};const et=(0,g.Z)(tt,[["__scopeId","data-v-25a0641e"]]);var at=et;const ot=t=>((0,o.dD)("data-v-1c3cd8b5"),t=t(),(0,o.Cn)(),t),nt={style:{"margin-left":"8px"}},it=ot((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),lt={class:"title-bar-icon"},st={class:"meal-title-container"},dt={class:"meal-title"},rt=["onClick"],ct=ot((()=>(0,o._)("div",{style:{"flex-grow":"1"}},null,-1))),ut={key:1,class:"meal-title-icon"};var ft={__name:"MainView",setup(t){const e=K();return(t,a)=>{const i=(0,o.up)("font-awesome-icon");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(at),(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[(0,o._)("div",nt," Day "+(0,u.zw)((0,n.SU)(e).day+1)+" / "+(0,u.zw)((0,n.SU)(e).planInfo.days),1),it,(0,o._)("div",{class:"title-bar-icon",onClick:a[0]||(a[0]=(...t)=>(0,n.SU)(e).goToPreviousDay&&(0,n.SU)(e).goToPreviousDay(...t))},[(0,o.Wm)(i,{icon:"fa-solid fa-chevron-left"})]),(0,o._)("div",{class:"title-bar-icon",onClick:a[1]||(a[1]=(...t)=>(0,n.SU)(e).toggleEditMode&&(0,n.SU)(e).toggleEditMode(...t))},[(0,n.SU)(e).editMode?((0,o.wg)(),(0,o.j4)(i,{key:0,icon:"fa-solid fa-pen-to-square"})):(0,o.kq)("",!0),(0,n.SU)(e).editMode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(i,{key:1,icon:"fa-regular fa-pen-to-square"}))]),(0,o._)("div",{class:"title-bar-icon",onClick:a[2]||(a[2]=(...t)=>(0,n.SU)(e).goToNextDay&&(0,n.SU)(e).goToNextDay(...t))},[(0,o.Wm)(i,{icon:"fa-solid fa-chevron-right"})]),(0,o._)("div",lt,[(0,o.Wm)(i,{icon:"fa-solid fa-ellipsis-vertical"})])])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(V,{protein:(0,n.SU)(e).todaysQuantities.protein,fat:(0,n.SU)(e).todaysQuantities.fat,carbs:(0,n.SU)(e).todaysQuantities.carbs,proteinTarget:(0,n.SU)(e).planInfo.protein,fatTarget:(0,n.SU)(e).planInfo.fat,carbsTarget:(0,n.SU)(e).planInfo.carbs},null,8,["protein","fat","carbs","proteinTarget","fatTarget","carbsTarget"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,n.SU)(Y),((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a},[(0,o._)("div",st,[(0,o._)("div",dt,(0,u.zw)(t),1),(0,n.SU)(e).editMode?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"meal-title-icon",onClick:t=>(0,n.SU)(e).showAddFoodModal(a)},[(0,o.Wm)(i,{icon:"fa-solid fa-plus"})],8,rt)):(0,o.kq)("",!0),ct,(0,n.SU)(e).editMode?((0,o.wg)(),(0,o.iD)("div",ut,[(0,o.Wm)(i,{icon:"fa-solid fa-trash"})])):(0,o.kq)("",!0)]),(0,o.Wm)((0,n.SU)(p()),{list:(0,n.SU)(e).todaysFoods[a],"item-key":"id",tag:"div",group:"foods",end:(0,n.SU)(e).foodDragEnd()},{item:(0,o.w5)((({element:t})=>[(0,o.Wm)(W,{name:t.name,icon:t.icon,description:t.description,protein:t.protein,fat:t.fat,carbs:t.carbs,amount:(0,n.SU)(e).editMode||1!==t.amount?t.amount:null,crossed:t.selected,"selected-quantity":(0,n.SU)(e).selectedQuantity,onBodyClick:a=>(0,n.SU)(e).changeFoodEaten(t),onAmountClick:a=>(0,n.SU)(e).changeFoodAmount(t)},null,8,["name","icon","description","protein","fat","carbs","amount","crossed","selected-quantity","onBodyClick","onAmountClick"])])),_:2},1032,["list","end"])])))),128))])),_:1}),(0,n.SU)(e).editMode?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"round-button",onClick:a[3]||(a[3]=t=>(0,n.SU)(e).recalculateToday())},[(0,o.Wm)(i,{icon:"fa-solid fa-rotate-right"})])):(0,o.kq)("",!0)],64)}}};const pt=(0,g.Z)(ft,[["__scopeId","data-v-1c3cd8b5"]]);var ht=pt;const vt=(0,o._)("div",{style:{"flex-grow":"1"}},null,-1),gt=(0,o._)("div",null,"Plan",-1),mt=(0,o._)("div",{style:{"flex-grow":"1"}},null,-1);var yt={__name:"PlanView",setup(t){return(t,e)=>((0,o.wg)(),(0,o.j4)(b,null,{default:(0,o.w5)((()=>[vt,gt,mt])),_:1}))}};const bt=yt;var _t=bt;const wt=(0,o._)("div",{style:{"flex-grow":"1"}},null,-1),St=(0,o._)("div",null,"Shopping List",-1),Ft=(0,o._)("div",{style:{"flex-grow":"1"}},null,-1);var kt={__name:"ListView",setup(t){return(t,e)=>((0,o.wg)(),(0,o.j4)(b,null,{default:(0,o.w5)((()=>[wt,St,Ft])),_:1}))}};const It=kt;var Mt=It,Dt=a(3494),Tt=a(7749),Ct=a(8539),Ut=a(8429);const xt=(0,r.ri)(d),Wt=t=>getComputedStyle(document.body).getPropertyValue(t),Nt=[{path:"/",redirect:{name:"menu"}},{path:"/menu",name:"menu",component:ht},{path:"/plan",name:"plan",component:_t},{path:"/list",name:"list",component:Mt}],Et=(0,i.p7)({history:(0,i.PO)(),routes:Nt});xt.use(Et),xt.use(c.ZP),Dt.vI.add(Ct.LEp),Dt.vI.add(Ct.g82),Dt.vI.add(Ct.acZ),Dt.vI.add(Ct.A35),Dt.vI.add(Ct._tD),Dt.vI.add(Ct.Wx7),Dt.vI.add(Ct.iV1),Dt.vI.add(Ct.fkH),Dt.vI.add(Ct.mHK),Dt.vI.add(Ct.fT7),Dt.vI.add(Ct.yYj),Dt.vI.add(Ct.$aW),Dt.vI.add(Ct.r8p),Dt.vI.add(Ct.Yai),Dt.vI.add(Ut.Yai),xt.component("font-awesome-icon",Tt.GN);const Ot=(0,z.WB)();xt.use(Ot);const jt=K();jt.load(),jt.fetchData(),xt.mount("#app")}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,o,n,i){if(!o){var l=1/0;for(c=0;c<t.length;c++){o=t[c][0],n=t[c][1],i=t[c][2];for(var s=!0,d=0;d<o.length;d++)(!1&i||l>=i)&&Object.keys(a.O).every((function(t){return a.O[t](o[d])}))?o.splice(d--,1):(s=!1,i<l&&(l=i));if(s){t.splice(c--,1);var r=n();void 0!==r&&(e=r)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[o,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,i,l=o[0],s=o[1],d=o[2],r=0;if(l.some((function(e){return 0!==t[e]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(d)var c=d(a)}for(e&&e(o);r<l.length;r++)i=l[r],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(c)},o=self["webpackChunkclient"]=self["webpackChunkclient"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(7868)}));o=a.O(o)})();
//# sourceMappingURL=app.8bfeea74.js.map
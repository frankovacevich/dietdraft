{"ast":null,"code":"export default {\n  data() {\n    return {\n      holdStartTimestamp: 0\n    };\n  },\n  props: {\n    name: {\n      type: String,\n      default: \"Food name\"\n    },\n    icon: {\n      type: String,\n      default: \"egg\"\n    },\n    description: {\n      type: String,\n      default: \"\"\n    },\n    protein: {\n      type: Number,\n      default: 0\n    },\n    fat: {\n      type: Number,\n      default: 0\n    },\n    carbs: {\n      type: Number,\n      default: 0\n    },\n    amount: {\n      type: Number,\n      default: undefined\n    },\n    selected: {\n      type: Boolean,\n      default: false\n    },\n    crossed: {\n      type: Boolean,\n      default: false\n    },\n    editing: {\n      type: Boolean,\n      default: false\n    },\n    selectedQuantity: {\n      type: Number,\n      default: undefined\n    }\n  },\n  computed: {\n    calories() {\n      return 9 * this.fat + 4 * this.protein + 4 * this.carbs;\n    },\n    displayName() {\n      return this.name.charAt(0).toUpperCase() + this.name.slice(1);\n    },\n    displayQuantity() {\n      let value;\n      switch (this.selectedQuantity) {\n        case 0:\n          value = this.calories;\n          break;\n        case 1:\n          value = this.protein;\n          break;\n        case 2:\n          value = this.fat;\n          break;\n        case 3:\n          value = this.carbs;\n          break;\n      }\n      return value.toFixed();\n    }\n  },\n  methods: {\n    resolveImg(image) {\n      return `/food/${image}.svg`;\n    },\n    heldLongEnough() {\n      const now = new Date().getTime();\n      const holdThreshold = 500; // 500 milliseconds\n      return now - this.holdStartTimestamp > holdThreshold;\n    },\n    holdStart() {\n      this.holdStartTimestamp = new Date().getTime();\n    },\n    holdEnd() {\n      if (this.heldLongEnough()) {\n        this.$emit(\"hold\");\n      }\n    },\n    bodyClick() {\n      this.$emit(\"bodyClick\");\n    },\n    amountClick() {\n      this.$emit(\"amountClick\");\n    }\n  }\n};","map":{"version":3,"names":["data","holdStartTimestamp","props","name","type","String","default","icon","description","protein","Number","fat","carbs","amount","undefined","selected","Boolean","crossed","editing","selectedQuantity","computed","calories","displayName","charAt","toUpperCase","slice","displayQuantity","value","toFixed","methods","resolveImg","image","heldLongEnough","now","Date","getTime","holdThreshold","holdStart","holdEnd","$emit","bodyClick","amountClick"],"sources":["/home/x/workspace/01-diet-draft/client/src/components/FoodItem.vue"],"sourcesContent":["<script>\nexport default {\n  data() {\n    return {\n      holdStartTimestamp: 0,\n    };\n  },\n\n  props: {\n    name: { type: String, default: \"Food name\" },\n    icon: { type: String, default: \"egg\" },\n    description: { type: String, default: \"\" },\n    protein: { type: Number, default: 0 },\n    fat: { type: Number, default: 0 },\n    carbs: { type: Number, default: 0 },\n    amount: { type: Number, default: undefined },\n    selected: { type: Boolean, default: false },\n    crossed: { type: Boolean, default: false },\n    editing: { type: Boolean, default: false },\n    selectedQuantity: { type: Number, default: undefined },\n  },\n\n  computed: {\n    calories() {\n      return 9 * this.fat + 4 * this.protein + 4 * this.carbs;\n    },\n\n    displayName() {\n      return this.name.charAt(0).toUpperCase() + this.name.slice(1);\n    },\n\n    displayQuantity() {\n      let value;\n      switch (this.selectedQuantity) {\n        case 0:\n          value = this.calories;\n          break;\n        case 1:\n          value = this.protein;\n          break;\n        case 2:\n          value = this.fat;\n          break;\n        case 3:\n          value = this.carbs;\n          break;\n      }\n      return value.toFixed();\n    },\n  },\n\n  methods: {\n    resolveImg(image) {\n      return `/food/${image}.svg`;\n    },\n\n    heldLongEnough() {\n      const now = new Date().getTime();\n      const holdThreshold = 500; // 500 milliseconds\n      return now - this.holdStartTimestamp > holdThreshold;\n    },\n\n    holdStart() {\n      this.holdStartTimestamp = new Date().getTime();\n    },\n\n    holdEnd() {\n      if (this.heldLongEnough()) {\n        this.$emit(\"hold\");\n      }\n    },\n\n    bodyClick() {\n      this.$emit(\"bodyClick\");\n    },\n\n    amountClick() {\n      this.$emit(\"amountClick\");\n    },\n  },\n};\n</script>\n\n<template>\n  <div\n    class=\"food-item\"\n    :class=\"{ selected: selected }\"\n    @click.self=\"bodyClick()\"\n    draggable=\"true\"\n  >\n    <div class=\"food-icon\" :class=\"{ crossed: crossed }\">\n      <img :src=\"resolveImg(icon)\" />\n    </div>\n    <div class=\"food-name\" :class=\"{ crossed: crossed }\" @click=\"bodyClick()\">\n      <span>{{ displayName }}</span>\n    </div>\n    <div style=\"flex-grow: 1\"></div>\n    <div v-if=\"selectedQuantity !== undefined\" class=\"display-quantity\">\n      <span>{{ displayQuantity }}</span>\n    </div>\n    <div v-if=\"amount\" class=\"food-amount\" @click=\"amountClick()\">\n      <span>{{ amount }}</span>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.food-item {\n  background-color: var(--color-gray-0);\n  border-radius: 8px;\n\n  width: 100%;\n  height: 30px;\n\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: stretch;\n  position: relative;\n  box-sizing: border-box;\n\n  margin-bottom: 5px;\n}\n\n.food-item.selected {\n  outline: 2px solid var(--color-primary);\n  outline-offset: -1px;\n}\n\n.food-name.crossed {\n  text-decoration: line-through;\n}\n\n.food-icon img {\n  width: 18px;\n  height: 18px;\n  padding: 6px;\n}\n\n.food-icon.crossed {\n  filter: grayscale(1);\n}\n\n.food-amount {\n  border-radius: 5px;\n  padding: 4px 6px;\n  background-color: var(--color-gray-1);\n  margin-right: 4px;\n}\n\n.display-quanitiy {\n  font-size: 9pt;\n  color: var(--color-gray-2);\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}